<div ng-controller="insuranceController as insurance">
    <div class="container">
        <h4>Insurance</h4>
        <hr>
        <div class="registrationBody">
            <div class="row">
                <div class="col-md-8 col-sm-10 col-xs-10">
                    <form class="form-inline">
                        <div class="form-group">
                            <input ng-change="insurance.patientNumberValidation()" ng-model="insurance.patientPhoneNumber" class="form-control" type="text" placeholder="Phone Number">
                        </div>
                        <div class="form-group">
                            <button ng-disabled="insurance.disableSearchBtn" data-target="#registrationModal" data-toggle="modal" ng-click="insurance.patientSearch()" class="btn mainAdminBtn">Search</button>
                        </div>
                    </form>
                </div>
            </div>
            <div id="registrationModal" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Patients List</h4>
                        </div>
                        <div class="modal-body">
                            <table class="table table-striped table-responsive">
                                <thead>
                                    <tr>
                                        <th>S.No.</th>
                                        <th>Patient Name</th>
                                        <th>Patient Number</th>
                                        <th>Case Number</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="patientEntity in insurance.patientsList track by $index">
                                        <td ng-bind="$index+1"></td>
                                        <td ng-bind="patientEntity.patientDetail.firstName"></td>
                                        <td ng-bind="patientEntity.organizationPatientNo"></td>
                                        <td ng-bind="patientEntity.organizationCaseNo"></td>
                                        <td>
                                            <a ng-click="insurance.selectPatient(patientEntity)" style="cursor:pointer;">SELECT</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                        </div>
                    </div>
                </div>
            </div>
            <span style="color:red;" ng-if="insurance.numberErrorMessage">(*Please enter phone number of length 10 digits)</span>
            <hr>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a style="cursor:pointer;color:white;" data-toggle="collapse" data-parent="#accordion" data-target="#registration">Registration</a>
                        </h4>
                    </div>
                    <div id="registration" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="col-md-6 col-xs-12 col-sm-12">
                                <div class="form-group">
                                    <label class="control-label">*Case Number</label>
                                    <input ng-model="insurance.organizationCaseNo" type="text" class="form-control" name="primarynumber" placeholder="Case Number" readonly>
                                    <label class="control-label">*Insurance Type</label>
                                    <select ng-model="insurance.insuranceType" class="form-control" name="insurance type">
                                        <option value="TYPE_1">TYPE_1</option>
                                        <option value="TYPE_2">TYPE_2</option>
                                        <option value="TYPE_3">TYPE_3</option>
                                    </select>
                                    <label class="control-label">*Insurance Category</label>
                                    <select ng-model="insurance.insuranceName" class="form-control" name="insurance type">
                                        <option value="NAME_1">NAME_1</option>
                                        <option value="NAME_2">NAME_2</option>
                                        <option value="NAME_3">NAME_3</option>
                                    </select>
                                    <label class="control-label">*Insurance Reference Number</label>
                                    <input ng-model="insurance.insuranceReferenceNo" type="text" class="form-control" name="referencenumber" placeholder="Reference Number">
                                    <label class="control-label">*Company name</label>
                                    <input ng-model="insurance.insuranceCompany" type="text" class="form-control" name="companyname" placeholder="Company Name">
                                    <label class="control-label">*Primary Patient Name</label>
                                    <input ng-model="insurance.primaryPatientName" type="text" class="form-control" name="primaryinsurance" placeholder="Primary Insurance">
                                    <label class="control-label">*Relation to Primary</label>
                                    <!-- <input ng-model="insurance.primaryRelation" type="text" class="form-control" name="relationtoprimary" placeholder="Relation to Primary"> -->
                                    <select ng-model="insurance.primaryRelation" class="form-control" name="insurance type">
                                        <option value="SELF">SELF</option>
                                        <option value="SPOUSE">SPOUSE</option>
                                        <option value="CHILD">CHILD</option>
                                        <option value="FATHER">FATHER</option>
                                        <option value="MOTHER">MOTHER</option>
                                        <option value="SIBLING">SIBLING</option>
                                        <option value="GRAND_PARENT">GRAND_PARENT</option>
                                        <option value="OTHER">OTHER</option>
                                    </select>
                                    <label class="control-label">*Phone Number</label>
                                    <input ng-model="insurance.patientPhoneNumber" type="text" class="form-control" name="primarynumber" placeholder="Primary number">
                                    <label class="control-label">*Patient Name</label>
                                    <input ng-model="insurance.patientName" type="text" class="form-control" name="primarynumber" placeholder="Patient Name">
                                </div>
                                <div class="form-group">
                                    <button ng-click="insurance.registerInsurance()" class="btn mainAdminBtn">Register</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a style="cursor:pointer;color:white;" data-target="#approvals" data-toggle="collapse" data-parent="#accordion">
                                Approvals
                            </a>
                        </h4>
                    </div>
                    <div id="approvals" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-10 col-sm-10 col-xs-10">
                                    <label for="exampleCaseName">Select Case Name</label>
                                    <div style="display:inline-block;" class="dropdown">
                                        <button style="width:250px;color:black;" class="dropdown-toggle btn" type="button" data-toggle="dropdown">{{insurance.displaySelectedCaseNumber}}<span class="caretCss caret"></span></button>
                                        <ul style="width:250px;" class="dropdown-menu">
                                            <li ng-click="insurance.selectCaseNumber(caseEntity)" ng-repeat="caseEntity in insurance.patientCases">
                                                <a style="cursor:pointer;">{{caseEntity.organizationCaseNo}}-{{caseEntity.creationTime|longDateIntoReadableDate}}</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
